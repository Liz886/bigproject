# 数独求解器使用说明

## 概述

该应用程序是一个 **数独求解器**，可以帮助用户：

1. 使用高效的回溯算法解答数独谜题。
2. 根据不同的难度（简单、中等、困难、专家）生成随机数独谜题。
3. 使用 **图像识别** 从图片中提取数独谜题并进行求解。

### 主要功能：

* **数独求解**：可以解答任何有效的数独谜题。
* **谜题生成**：可以生成随机数独谜题，支持不同的难度。
* **专家难度**：使用特殊策略，为生成专家级难度的数独添加权重，使其更加具有挑战性。
* **图像识别**：通过OCR技术识别数独图片并解答。
* **实时反馈**：支持实时检查冲突和提供提示。

## 前置条件

在使用该应用程序之前，请确保您已经安装了以下内容：

1. **Python 3.6+**
2. **Tesseract OCR**：用于从图片中提取数字（文本）。

   * [Tesseract安装指南](https://github.com/tesseract-ocr/tesseract)
3. **所需的Python库**：

   * `opencv-python`
   * `pytesseract`
   * `tkinter`
   * `numpy`
   * `Pillow`

您可以使用以下命令安装所需的Python库：

```bash
pip install opencv-python pytesseract numpy Pillow
```

## 安装

### 1. 克隆或下载项目代码。

### 2. 安装依赖项。

```bash
pip install -r requirements.txt
```

### 3. 设置Tesseract OCR：

* **Windows**：从[Tesseract官网](https://github.com/tesseract-ocr/tesseract)下载并安装Tesseract OCR，安装后将Tesseract的安装路径添加到系统的环境变量 `PATH` 中。
* **Linux/Mac**：可以通过包管理器安装Tesseract：

  * Linux: `sudo apt install tesseract-ocr`
  * Mac: `brew install tesseract`

## 使用方法

### 1. **运行程序**

要运行该应用程序，直接执行脚本：

```bash
python sudoku_solver.py
```

运行后将启动图形用户界面（GUI），您可以：

* 手动输入数独谜题并点击“求解”按钮获取答案。
* 点击“生成随机数独”生成新的数独谜题。
* 选择一张数独图片进行识别和求解。

### 2. **与图形界面互动**

应用程序提供了一个简单的界面，您可以使用以下功能：

* **输入数独谜题**：在网格中填写9x9的数字或留空（空格用0表示）。

* **求解**：输入数独谜题后，点击“求解”按钮来解答数独。如果谜题可以解出，解答会自动填入。

* **生成随机数独**：您可以选择难度级别（"简单"、"中等"、"困难"、"专家"）并点击“生成”按钮来生成新的数独谜题。

* **检查冲突**：如果您怀疑数独存在冲突，可以点击“检查”按钮，验证当前数独是否符合数独规则（行、列或子网格中是否有重复数字）。

* **提示**：点击“提示”按钮，系统会为当前空白的格子提供一个正确的数字作为提示。

* **清空**：清空当前的数独谜题。

### 3. **生成随机数独谜题**

* 在生成随机谜题时，您可以选择不同的难度：

  * **简单**：较容易的谜题，提示较多，解决过程简单。
  * **中等**：一般难度，适合大多数玩家。
  * **困难**：较难的谜题，提示较少，挑战性更大。
  * **专家**：非常困难，关键区域加权，使得谜题具有更高的挑战性。

### 4. **图像识别**

* 点击“从图片识别”按钮，选择一张数独图片，应用程序将通过OCR技术识别图片中的数独并进行求解。
* 支持的图片格式：JPG、PNG、BMP。

### 5. **检查冲突**

* 点击 **检查** 按钮，程序会检查当前数独是否存在冲突。如果存在冲突，程序会高亮显示冲突的单元格。

### 6. **保存解决方案**

* 解答完成后，您可以通过导出功能将解答保存到文件中，或者手动复制解决方案。

## 专家难度与加权策略

在 **专家难度** 中，采用特殊策略来生成具有挑战性的数独谜题：

* **加权关键位置**：通过加权的方式，增加了数独中心、角落和边缘中心位置的填充难度，使得这些区域更难解答，从而增加谜题的复杂度。

  * **中心区域**（坐标范围 3 ≤ i ≤ 5, 3 ≤ j ≤ 5）权重为 **5**。
  * **角落位置**（如 (0, 0), (0, 8), (8, 0), (8, 8)）权重为 **3**。
  * **边缘中心位置**（如 (0, 4), (4, 0), (4, 8), (8, 4)）权重为 **2**。
  * 其他位置的权重为 **1**。

这种加权策略确保生成的 **专家难度** 数独谜题在关键位置的数字更加复杂和难以填充，从而提高了解题的难度。

## 故障排除

### 问题：“未找到Tesseract”

* 确保已安装Tesseract OCR并将其路径添加到系统的 `PATH` 变量中。如果使用Windows，您可能需要手动设置 `TESSERACT_PATH` 变量：

  ```python
  pytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'
  ```

### 问题：“GUI无法显示”

* 确保已安装 **Tkinter**。如果没有安装，可以通过包管理器安装（Linux），或确保它已包含在Windows/macOS的Python安装中。

### 问题：“图像识别失败”

* 确保选择的图片清晰，且数独网格可见且居中。背景杂乱或干扰较大的图片可能会影响OCR的准确性。

---

### **贡献**

如果您想为这个项目贡献：

1. Fork 这个仓库。
2. 创建一个新分支。
3. 实现您的更改。
4. 提交拉取请求（Pull Request）。

---

祝您享受数独的挑战！🧩
